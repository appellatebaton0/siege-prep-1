[gd_scene load_steps=13 format=3 uid="uid://dgu365ubfha5h"]

[ext_resource type="Script" uid="uid://dwh0yifrqxhcp" path="res://scripts/actor.gd" id="1_7wueq"]
[ext_resource type="PackedScene" uid="uid://dnd4kisf8wjau" path="res://scenes/components/cp_sprite.tscn" id="1_ktjr4"]
[ext_resource type="PackedScene" uid="uid://byojuvig761hd" path="res://scenes/components/cp_motion.tscn" id="2_7wueq"]
[ext_resource type="PackedScene" uid="uid://cfhfudk7fnj6v" path="res://scenes/components/cp_hurtbox.tscn" id="2_8y416"]
[ext_resource type="Script" uid="uid://t23ay2yfroa1" path="res://scripts/motion_states/cms_float.gd" id="3_oomub"]
[ext_resource type="PackedScene" uid="uid://brxmk6g3pq4d7" path="res://scenes/components/cp_respawn.tscn" id="6_8y416"]
[ext_resource type="Texture2D" uid="uid://ckg7m0mj1qbxu" path="res://assets/player.png" id="6_7860b"]
[ext_resource type="PackedScene" uid="uid://ceqfdea4uf607" path="res://scenes/components/cp_pivot_look.tscn" id="8_xx81n"]
[ext_resource type="PackedScene" uid="uid://dgw1cdcm2loma" path="res://scenes/components/cp_hitbox.tscn" id="9_0w4p8"]
[ext_resource type="Texture2D" uid="uid://5r73hwubetw1" path="res://assets/shield.png" id="9_wl55n"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7860b"]
size = Vector2(16, 16)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7wueq"]
size = Vector2(16, 16)

[node name="Player" type="Node2D" groups=["Actors"]]
script = ExtResource("1_7wueq")

[node name="CP_Hurtbox" parent="." instance=ExtResource("2_8y416")]
collision_layer = 2
collision_mask = 7

[node name="CollisionShape2D" type="CollisionShape2D" parent="CP_Hurtbox"]
shape = SubResource("RectangleShape2D_7860b")

[node name="CP_Motion" parent="." instance=ExtResource("2_7wueq")]
collision_layer = 2

[node name="CMS_Float" type="Node" parent="CP_Motion"]
script = ExtResource("3_oomub")
max_speed = 130.0
acceleration = 7.0

[node name="CollisionShape2D" type="CollisionShape2D" parent="CP_Motion"]
shape = SubResource("RectangleShape2D_7wueq")

[node name="CP_Sprite" parent="." instance=ExtResource("1_ktjr4")]
texture_filter = 1
texture = ExtResource("6_7860b")

[node name="CP_Respawn" parent="." instance=ExtResource("6_8y416")]
global_lose = true

[node name="CP_PivotLook" parent="." instance=ExtResource("8_xx81n")]

[node name="Shield" type="Node2D" parent="CP_PivotLook"]
position = Vector2(21, 0)
script = ExtResource("1_7wueq")
metadata/_custom_type_script = "uid://dwh0yifrqxhcp"

[node name="CP_Sprite" parent="CP_PivotLook/Shield" instance=ExtResource("1_ktjr4")]
texture_filter = 1
texture = ExtResource("9_wl55n")

[node name="CP_Hitbox" parent="CP_PivotLook/Shield" instance=ExtResource("9_0w4p8")]
collision_layer = 4

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="CP_PivotLook/Shield/CP_Hitbox"]
polygon = PackedVector2Array(-6, -16, -2, -16, 0, -15, 4, -10, 5, -7, 5, 7, 4, 10, 0, 15, -2, 16, -6, 16, -6, 15, -2, 6, -2, -6, -6, -15)

[connection signal="got_hurt" from="CP_Hurtbox" to="CP_Respawn" method="respawn"]
[connection signal="respawned" from="CP_Respawn" to="CP_Motion" method="_on_respawned"]
